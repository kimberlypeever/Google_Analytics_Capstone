---
title: "Google Analytics Capstone"
author: "Kimberly Peever"
date: "`r Sys.Date()`"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Bellabeat

Bellabeat is a high-tech manufacturer of health-focused products for women. Urška Sršen, cofounder and Chief Creative Officer of Bellabeat, believes that analyzing smart device fitness data could help unlock new growth opportunities for the company. Collecting data on activity, sleep, stress, and reproductive health has allowed Bellabeat to empower women with knowledge about their own health and habits. Since it was founded in 2013, Bellabeat has grown rapidly and quickly positioned itself as a tech-driven wellness company for women.

 ## Business Task

Analyzing trends in smart device fitness data could lead to the improvement of Bellabeat products and furthermore an improvement in womens' health across the globe.

## Data Used

The data analyzed today comes from the Fitbit Fitness Tracker Data set on kaggle. This data is comprised of 18 different datasets containing different measured variables in relation to Fitbit tracking data. These datasets track sleep, weight, activity levels, dates/times, and more. The main datasets I used for my analysis were dailyActivity_merged, hourlyCalories_merged, hourlyIntensities_merged, sleepDay_merged, and weightLogInfo_merged.
```{r, message=FALSE}
daily_activity <- read.csv("/kaggle/input/fitbit/Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv") 
sleep <- read.csv("/kaggle/input/fitbit/Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")
weight <- read.csv("/kaggle/input/fitbit/Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
hourly_calories <- read.csv("/kaggle/input/fitbit/Fitabase Data 4.12.16-5.12.16/hourlyCalories_merged.csv")
```

These datasets were generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. Respondents were assigned an Id number for privacy and confidentiality.

## Data Cleaning

Datasets were first explored via Excel and SQL to see the structure of the data and any obvious errors. It was found that Id was a common factor in all datasets and was later used in analysis to compare data between datsets.

Data was verified and cleaned using R. Datasets were first imported, librarys were loaded, and then functions "glimpse" and "head" were used to get a summary of the variables and see the first few rows of the dataframe.
```{r, warning=FALSE, error=FALSE, message=FALSE}
library(tidyverse)
library(lubridate)
library(dplyr)
library(ggplot2)
library(tidyr)
library(janitor)
```

```{r, include=FALSE}
daily_activity$ActivityDate=as.POSIXct(daily_activity$ActivityDate, 
                                       format="%m/%d/%Y", tz=Sys.timezone())
daily_activity$DayOfWeek<-weekdays(daily_activity$ActivityDate)
daily_activity$Saturday<-ifelse(daily_activity$DayOfWeek =="Saturday",1,0)
daily_activity$Sunday<-ifelse(daily_activity$DayOfWeek =="Sunday" ,1, 0)
daily_activity$Weekend<-daily_activity$Sunday+daily_activity$Saturday
daily_activity$Weekend<-as.factor(daily_activity$Weekend)
```
```{r, include=FALSE}
daily_activity$TotalSteps<-as.numeric(daily_activity$TotalSteps)
daily_activity$DayOfWeek<-as.factor(daily_activity$DayOfWeek)
hourly_calories$Hours<- as.factor(substr(hourly_calories$ActivityHour, 10,21))
```
```{r, include=FALSE}
daily_activity<-clean_names(daily_activity)
hourly_calories<-clean_names(hourly_calories)
sleep<-clean_names(sleep)
weight<-clean_names(weight)
```


After review the preview of the data, I decided that it would be beneficial for the analysis to further categorize the date variable into days of the week and into a binomial variable of "weekend", where 1 signified Saturday or Sunday and 0 signified a weekday. Furthermore I also created an "hours" column in hourly_calories so I could treat each hour as a factor and test for significance.

Data types of several columns were slightly altered so they would be able to pass as arguments into a linear model. Lastly, I used the clean_names function on all of my dataframes for cleanliness and consistent naming conventions.

## Analysis

### Summary of the Data

One of the first things I noticed when looking at a summary of the data was the different number of observations per dataset. I further investigated to find the number of unique Ids used per data set.

```{r, include=TRUE}
n_distinct(daily_activity$id)

```

```{r, include=TRUE}

n_distinct(hourly_calories$id)
```

```{r, include=TRUE}
n_distinct(sleep$id)
```

```{r, include=TRUE}
n_distinct(weight$id)
```

We can see by these results that significantly less users participated in the weight and sleep surveys over the daily activity survey. It is unclear whether this was a choice of the individual giving the survey or if less people are using these smart device tools. 

### Days of the Week
After cleaning the data and looking at the summaries of each set I decided to test how consumers were using their fitbits by seeing if there was a difference in steps for each day of the week. I proceeded to fit my created column "days_of_the_week" to a linear model and test if it was significant for total steps.  

```{r}
daily.activity.lm1<- lm(total_steps~day_of_week, data = daily_activity)
summary(daily.activity.lm1)
anova(daily.activity.lm1)
```

We can see here that in both our summary of the coefficients and the ANOVA table that the day of the week is not a significant factor for total steps. Next, I grouped by days of the week into the weekend specifically and tested for significance again. 

```{r}
daily.activity.lm2<- lm(total_steps~weekend, data = daily_activity)
summary(daily.activity.lm2)
anova(daily.activity.lm2)
```

These findings reflect the same results as days of the week, showing a lack of statistical significance. This led me to think that days of the week may be too broad of a time range for significance so next I looked at how hours would impact use. 

### Hours of the Day

This time instead of looking at total steps taken in a day I looked at calories burned and compared it to each hour in the day.
```{r}
calories.lm<- lm(hourly_calories$calories~hourly_calories$hours, data = daily_activity)
summary(calories.lm)
anova(calories.lm)
```
We can see in the summary of coefficients that several hours of the day are statistically significant as well as our ANOVA table states the hours has a significant p-value. These findings show that there are certain hours of the day where people are consistently more active based on this dataset.

## Visualizations
This graph shows the difference of total steps taken in a day based on the day of the week, the weekend highlighted in orange. As we can see there as small difference in height of each day but not enough so be statistically significant as reported by the analysis. 

```{r, echo=FALSE}
ggplot(data=daily_activity) + 
  geom_col(mapping = aes(x=day_of_week, y=total_steps, fill=weekend))+
  labs(title = "Average Total Steps Taken Each Day of The Week")
```

![](https://storage.googleapis.com/kagglesdsdata/datasets/3278698/5702208/Active%20Hours.png?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcp-kaggle-com%40kaggle-161607.iam.gserviceaccount.com%2F20230516%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20230516T230454Z&X-Goog-Expires=259200&X-Goog-SignedHeaders=host&X-Goog-Signature=6b6949b2f2ad6c4b3da6403c56c9fa13345c0ffc73617b79cf366dd5bf5cf5485a4793b01aa2bb3b3986ff5c11fada5aff55c8571dbc3b82704807f9629a0c40c5a79cd3ca1488e792110331b355d1e96e90c4af4f34b5fa927cc2cf3aad2b00c07921112403c17b31b0167cdc004131687a2d1acf3c115052eda4102eff1b6781c565b1e1d65f52d2b7d7e4a326dbeec0f8a660b66e0e0e0ea69a2655e52a204fa0108e548a808c64cfcb89c5fc94dd4a70036ddb3eaa8c81915c01f04cb7ad7dd44bb8f39ba53a0a6010a04660e800c68f66898ba44fbe25171a866a9fa27d24e00f8dd9d126516d6d0eea0e1f1b79ac0e84d8c64dfe1ae020bb6e08f26a5f){}

![](https://storage.googleapis.com/kagglesdsdata/datasets/3278698/5702208/Peak%20Fitness%20Hours.png?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=gcp-kaggle-com%40kaggle-161607.iam.gserviceaccount.com%2F20230516%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20230516T230918Z&X-Goog-Expires=259200&X-Goog-SignedHeaders=host&X-Goog-Signature=9b3b6b8e3f0712c0fdcbf85b28e828a0ccfd9decd48cc12affaa4159641735f6bc1ec1d42ee8d1c55ccb3a89ce3ea49c2789169ac0c3fd90a14aba723209363920301b310c5e1f8be8ced6c6e1b1331fca3c0a783bc6712aa9371c359f186632dead608c7a39c686e9e01d19ea58ff6bb205b66500933ccba6221ef8191a3a9eec59e1677784df4df69a15ff0c38cd09820967a102769a51d08a79ddee864340e045ffa0400d2e518be03791cfe8eb4399f97423db0eccc91fe42a9a3fcfd986e634e6186de4e045426fcfb8aa573f2c477c7ac1737f66d52f11a1dbd5f9b5bd90c1452cd8e320c5bde972d71930e0e5d992a00bc00c621cac6f308311aecc2b){}

These graphs made on Tableau show that the most calories burnt/higher intensity during the day is between 8am and 8pm, this makes sense as thats when most people are awake. The graph on the bottom shows that calories burnt/highest insensity peaked between 5pm and 7pm

## Limitations of the Data
The datasets we were using provided some strong insights into how consumers use non-Bellabeat related products. However, this data isn't entirely generalizable to the Bellabeat target consumer. Bellabeat is designed for women and it is unclear how many participants in this survey were men vs. women. The sample size is also not very large, as we saw in the summary analysis, there were only 8 individuals taking part in the weight dataset. It is also unclear geographically this data came from and with the small time frame of 1 month if it would generalize to the rest of the year as well. Additional data, such as tracking womens menstrual cycles and relating that to fitness would likely provide more insightful and applicable findings.

## Recommendations
While the data was not entirely a reflection of the target audience, some of the results found have the potential to  positively impact womens' health in the future. Here are my suggestions to influnece marketing for Bellabeat products. 

1. It was found that the most amount of calories burnt was between 5 and 7pm, perhaps creating a push notification around 7:30pm about mindfulness techniques would have a large impact for the majority of users who would be heading to bed right after their workout.

2. It was also found that not many individuals participated in both the sleep and weight study. Adding a smart scale to their list of products may be an opportunity to reach an untapped market. 

3. Lastly, due to the most popular time to workout being around dinner time, offering pre and post workout meals on the app could produce more engagement. 
